# Generated by Django 4.2.26 on 2026-01-10 09:43

from django.conf import settings
import django.core.validators
from django.db import migrations, models
import django.db.models.deletion


class Migration(migrations.Migration):

    dependencies = [
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
        ('predictor', '0003_advanced_features'),
    ]

    operations = [
        migrations.RenameIndex(
            model_name='auditlog',
            new_name='predictor_a_action__d3c1a3_idx',
            old_name='audit_action_idx',
        ),
        migrations.RenameIndex(
            model_name='auditlog',
            new_name='predictor_a_user_id_6ff550_idx',
            old_name='audit_user_idx',
        ),
        migrations.RenameIndex(
            model_name='predictionrecord',
            new_name='predictor_p_user_id_c1db0d_idx',
            old_name='pred_user_risk_idx',
        ),
        migrations.AlterField(
            model_name='auditlog',
            name='action_type',
            field=models.CharField(choices=[('PREDICTION', 'Prediction Made'), ('PROFILE_UPDATE', 'Profile Updated'), ('USER_CREATED', 'User Created'), ('USER_DELETED', 'User Deleted'), ('ROLE_CHANGED', 'Role Changed'), ('PASSWORD_RESET', 'Password Reset'), ('LOGIN', 'User Login'), ('LOGOUT', 'User Logout'), ('EXPORT', 'Data Export'), ('CONSENT_GIVEN', 'Consent Given')], help_text='Type of action performed', max_length=50),
        ),
        migrations.AlterField(
            model_name='auditlog',
            name='user',
            field=models.ForeignKey(blank=True, help_text='User who performed the action', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='audit_logs', to=settings.AUTH_USER_MODEL),
        ),
        migrations.AlterField(
            model_name='chatmessage',
            name='context',
            field=models.JSONField(blank=True, help_text='Prediction context used for generating response', null=True),
        ),
        migrations.AlterField(
            model_name='chatmessage',
            name='message',
            field=models.TextField(help_text='User message/question'),
        ),
        migrations.AlterField(
            model_name='chatmessage',
            name='response',
            field=models.TextField(help_text='AI assistant response'),
        ),
        migrations.AlterField(
            model_name='chatmessage',
            name='user',
            field=models.ForeignKey(help_text='User who sent the message', on_delete=django.db.models.deletion.CASCADE, related_name='chat_messages', to=settings.AUTH_USER_MODEL),
        ),
        migrations.AlterField(
            model_name='consentrecord',
            name='user',
            field=models.ForeignKey(help_text='User who gave consent', on_delete=django.db.models.deletion.CASCADE, related_name='consents', to=settings.AUTH_USER_MODEL),
        ),
        migrations.AlterField(
            model_name='patientprofile',
            name='age',
            field=models.IntegerField(help_text='Patient age in years', validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(150)]),
        ),
        migrations.AlterField(
            model_name='patientprofile',
            name='allergies',
            field=models.TextField(blank=True, help_text='Known allergies (comma-separated)', null=True),
        ),
        migrations.AlterField(
            model_name='patientprofile',
            name='height',
            field=models.FloatField(blank=True, help_text='Height in centimeters', null=True, validators=[django.core.validators.MinValueValidator(0)]),
        ),
        migrations.AlterField(
            model_name='patientprofile',
            name='medical_conditions',
            field=models.TextField(blank=True, help_text='Pre-existing medical conditions (comma-separated)', null=True),
        ),
        migrations.AlterField(
            model_name='patientprofile',
            name='medications',
            field=models.TextField(blank=True, help_text='Current medications (comma-separated)', null=True),
        ),
        migrations.AlterField(
            model_name='patientprofile',
            name='user',
            field=models.OneToOneField(help_text='Associated user account', on_delete=django.db.models.deletion.CASCADE, related_name='patient_profile', to=settings.AUTH_USER_MODEL),
        ),
        migrations.AlterField(
            model_name='patientprofile',
            name='weight',
            field=models.FloatField(blank=True, help_text='Weight in kilograms', null=True, validators=[django.core.validators.MinValueValidator(0)]),
        ),
    ]
